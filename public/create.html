<!DOCTYPE html>
<html>
<head>
<title>Create New Event</title>
<!-- jQuery -->
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function(){

	//Load the locations from the system
	$.getJSON("/events/location/list", function(data) {
		console.log(data);
		$.each(data, function(i, item) {
			$('#location').append('<option value="'+item._id+'">' + item.name+ '</option>');
		});
	});
	
	//Load the contacts from the system
	$.getJSON("/events/contact/list", function(data) {
		console.log(data);
		$.each(data, function(i, item) {
			$('#contact').append('<option value="'+item._id+'">' + item.name+ '</option>');
		});
	});
});
</script>
</head>
<body>
	<p>Enter event details:</p>
	<form action='/events/new' id="createForm">
		<table border="0">
			<tr>
				<td>Event Title (Todo):</td>
				<td><input type="text" name="title" /></td>
			</tr>
			<tr>
				<td>Event Type:</td>
				<td>
					<select name="type" id="type">
						<option value="Emergency">Emergency</option>
						<option value="Warning">Warning</option>
						<option value="Weather">Weather</option>
						<option value="Traffic">Traffic</option>
					</select>
				</td>
			</tr>
			<tr>
				<td>Event Location:</td>
				<td>
					<select id="location" name="location">
					</select>
				</td>
			</tr>
			<tr>
				<td>Event radius</td>
				<td><input type="text" name="radius" /></td>
			</tr>
			<tr>
				<td>Contact:</td>
				<td>
					<select id="contact" name="contact">
					</select>
				</td>
			</tr>
			<tr>
				<td>Status:</td>
				<td>
					<input type="radio" name="status" value="ongoing" checked>Ongoing
					<input type="radio" name="status" value="closed">Closed
				</td>
			</tr>
			<tr>
				<td>Group:</td>
				<td>
					<select name="group">
						<option value="0">TODO</option>
					</select>
				</td>
			</tr>
			<tr>
				<td>Event Description:</td>
			</tr>
			<tr>
				<td colspan="2" align="center">
				<textarea name="description" cols="40" rows="10"></textarea>
				</td>
			</tr>
			<tr>
				<td colspan="2" align="center"><input type="submit" value="Submit" /></td>
			</tr>
		</table>
	</form>

	<div id="images"></div>
	
<script>
  /* attach a submit handler to the form */
  $("#createForm").submit(function(event) {

    /* stop form from submitting normally */
    event.preventDefault(); 
        
    /* get some values from elements on the page: */
    var $form = $( this ),
        term = $form.find( 'input[name="s"]' ).val(),
        url = $form.attr( 'action' );

    /* Send the data using post and put the results in a div */
    /*
    $.post( url, { s: term },
      function( data ) {
          var content = $( data ).find( '#content' );
          $( "#result" ).empty().append( content );
          console.log('Got back: '+content);
      }
    );
    */
  });
</script>


</body>
</html>
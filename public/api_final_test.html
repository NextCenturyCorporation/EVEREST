<!DOCTYPE html>         
<html>
<head>
	<title>API Testing</title>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
	<script src="http://code.jquery.com/jquery-latest.js"></script>
	<link rel="stylesheet" href="http://code.jquery.com/qunit/git/qunit.css" type="text/css" media="screen" />
    <script type="text/javascript" src="http://code.jquery.com/qunit/git/qunit.js"></script>
<script language="javascript">
//#############################################################################
function jQuery_getButton() { 
	$.getJSON("http://localhost:8081/events/"+$("#event").val(),{},function(data) {   // data returned from server
  		//console.log(data[0]);
		//  alert(data[0]);
	  	//  event zero is the first event returned
		$('#GID').empty().append("Event ID : " + data[0].GID)
		$('#timestmp').empty().append("Time  : " + data[0].timestmp);
		$('#title').empty().append("TItle : " + data[0].title);
		$('#type').empty().append("Type  : " + data[0].type);
		$('#group').empty().append("Group  : " + data[0].group);
		$('#status').empty().append("Status  : " + data[0].status);
		$('#userID').empty().append("User ID  : " + data[0].userID);
		$('#description').empty().append("Description  : "+ data[0].description);
		$('#radius').empty().append("Radius  : " + data[0].radius);
		$('#comments').empty().append("Comments : " + data[0].comments);
		$('#location').empty().append("Location  : " + data[0].location);
		$('#contact').empty().append("Contact  : " + data[0].contact);
		myData = JSON.stringify(data[0]);
		eventObj = data[0];
		//document.write(myData);

		if (data[0].GID == 0) {
			t1 = eventObj.GID == 0;
			t2 = eventObj.contact == "4fe9c084f4411a7c7b000002";
			t3 = eventObj.location == "4fe9c084f4411a7c7b000003";
			t4 = eventObj.radius == 10;
			t5 = eventObj.description == "Aah! Hes here!";
			t6 = eventObj.status == "Ongoing";
			t7 = eventObj.type == "Emergency";
			t8 = eventObj.title == "Edgardo!";
			t9 = eventObj._id == "4fe9c084f4411a7c7b000004";
			// t10 = eventObj.timestmp == "2012-06-26T14:00:36.739Z"
			passAll = t1 && t2 && t3 && t4 && t5 && t6 && t7 && t8 && t9;
			//alert(passAll)
			test("testing event 0",function() {
						ok(passAll == true,"check event0");
					});
		} //end if

		if (data[0].GID == 1) {
			t1 = eventObj.GID == 0;
			t2 = eventObj.contact == "4fe9c084f4411a7c7b000002";
			t3 = eventObj.location == "4fe9c084f4411a7c7b000003";
			t4 = eventObj.radius == 10;
			t5 = eventObj.description == "Aah! Hes here!";
			t6 = eventObj.status == "Ongoing";
			t7 = eventObj.type == "Emergency";
			t8 = eventObj.title == "Edgardo!";
			t9 = eventObj._id == "4fe9c084f4411a7c7b000004";
			// t10 = eventObj.timestmp == "2012-06-26T14:00:36.739Z"
			passAll = t1 && t2 && t3 && t4 && t5 && t6 && t7 && t8 && t9;
			//alert(passAll)
			test("testing event 1",function() {
						ok(passAll == true,"check event1");
					});
		} //end if 
	})// end getJSON
} // end jQuery_get()

//#############################################################################

function jQuery_getEvent(arg) {
	ipString = "http://localhost:8081/events/" + arg;
	$.getJSON(ipString,{},function(data) {
		myData = JSON.stringify(data[0]);
		eventObj = data[0];
		//document.write(myData);
		if (data[0].GID == 0) {
			t1 = eventObj.GID == 0;
			t2 = eventObj.contact == "4fe9c084f4411a7c7b000002";
			t3 = eventObj.location == "4fe9c084f4411a7c7b000003";
			t4 = eventObj.radius == 10;
			t5 = eventObj.description == "Aah! Hes here!";
			t6 = eventObj.status == "Ongoing";
			t7 = eventObj.type == "Emergency";
			t8 = eventObj.title == "Edgardo!";
			t9 = eventObj._id == "4fe9c084f4411a7c7b000004";
			passAll = t1 && t2 && t3 && t4 && t5 && t6 && t7 && t8 && t9;
			//alert(passAll)
			test("testing event 0", function() {
				ok(passAll == true, "check event0");
			});
		} //end if
		if (data[0].GID == 1) {
			t1 = eventObj.GID == 0;
			t2 = eventObj.contact == "4fe9c084f4411a7c7b000002";
			t3 = eventObj.location == "4fe9c084f4411a7c7b000003";
			t4 = eventObj.radius == 10;
			t5 = eventObj.description == "Aah! Hes here!";
			t6 = eventObj.status == "Ongoing";
			t7 = eventObj.type == "Emergency";
			t8 = eventObj.title == "Edgardo!";
			t9 = eventObj._id == "4fe9c084f4411a7c7b000004";
			passAll = t1 && t2 && t3 && t4 && t5 && t6 && t7 && t8 && t9;
			//alert(passAll)
			test("testing event 1", function() {
				ok(passAll == true, "check event1");
			});
		} //end if 
	})// end getJSON
} // end jQuery_get()

//#############################################################################

function jQuery_getEvents() {
	jQuery_getEvent(0);
	//jQuery_getEvent(1);
}

//#############################################################################
function checkIDs() {
	$.getJSON("http://localhost:8081/events/" + $("#event").val(),{},function(data) {
				myData = JSON.stringify(data); //document.write(myData);
				test("checking all ids", function() {
					ok(myData == JSON.stringify([ {
						"GID" : 0,
						"_id" : "4fda1d7303ca976815000002"
					}, {
						"GID" : 1,
						"_id" : "4fda2cc60abf40140f000005"
					} ]), "IDs match");
				});
			})// end getJSON
} // check IDs()

//#############################################################################

//document.write(JSON.stringify($('#err')));
//document.write($('#err'));
//document.write($('#err'));
</script>
</head>
<body onload="jQuery_getEvents()">

Find An Event: <input type = "text" id= "event"/>
<button id="cow" type="button" onclick="jQuery_getButton()">get event</button>
 
 <!--
 get all events
 -->
 <input id="id_for_get_all_events" type="button" onclick="return jQuery_getEvents()" value= "get all events"></input>
<!-- <input id ="BIG" value= 5   >-->
 
 

 <button type="button" onclick="checkIDs()">check all ID's</button>	 
	 
 <div id="err">Errors :</div>
 
 <div id="GID"> 	
    Event ID :
 </div>
 
 
  <div id="timestmp"> 
  Time : 
 </div>

  <div id="title"> 	
    Title :
 </div>
 

  <div id="type"> 	
   Type:
 </div>
 

  <div id="group"> 
   Group :
 </div>
 
    
  <div id="status"> 
  Status :
 </div>
 
    
  <div id="userID"> 	
  User ID :
 </div>
 
    
  <div id="description"> 
  Description :
 </div>
 
   
  <div id="radius"> 
   Radius :
 </div>
 
    
  <div id="comments"> 	
  comments :
 </div>
 
   
  <div id="location"> 	
   Location :
 </div>
 
    
  <div id="contact">
 Contact : 
 </div>
	
<h1 id="qunit-header">Centurion Project</h1>
<h2 id="qunit-banner"></h2>
<div id="qunit-testrunner-toolbar"></div>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture">test markup, will be hidden</div>     
</body>
</html>